<!DOCTYPE html>
<html>
  <head>
    <title>Shortest Path Planner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    <style>
      #map {
        height: 400px;
      }
    </style>
  </head>
  <body>
    <h1>Shortest Path Planner</h1>
    <p>Click the button to select 5 different locations:</p>
    <button onclick="selectLocations()">Select Locations</button>
    <div id="map"></div>
    <script>
      var map = L.map('map').setView([0, 0], 13);
      var locations = [];

      // Get the user's current location
      navigator.geolocation.getCurrentPosition(function(position) {
        var latlng = L.latLng(position.coords.latitude, position.coords.longitude);
        L.marker(latlng).addTo(map).bindPopup('You are here!');
        map.setView(latlng, 13);
      });

      function selectLocations() {
        // Define the locations to visit
        var locationsToVisit = [
          {
            name: 'Location 1',
            latlng: L.latLng(51.507222, -0.127758)
          },
          {
            name: 'Location 2',
            latlng: L.latLng(48.856613, 2.352222)
          },
          {
            name: 'Location 3',
            latlng: L.latLng(40.712776, -74.005974)
          },
          {
            name: 'Location 4',
            latlng: L.latLng(-33.865143, 151.209900)
          },
          {
            name: 'Location 5',
            latlng: L.latLng(-37.813629, 144.963058)
          }
        ];

        // Add markers for each location and store them in the locations array
        locationsToVisit.forEach(function(location) {
          var marker = L.marker(location.latlng).addTo(map).bindPopup(location.name);
          locations.push(marker);
        });

        // Calculate the shortest path from the user's current location to the selected locations
        var userLocation = map.getCenter();
        var waypoints = locations.map(function(location) {
          return {
            latLng: location.getLatLng()
          };
        });
        waypoints.unshift({
          latLng: userLocation
        });
        var shortestPath = L.Routing.control({
          waypoints: waypoints,
          router: L.Routing.mapbox('API_KEY')
        }).addTo(map);
      }
    </script>
  </body>
</html>
